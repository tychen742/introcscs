<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.6. If-statement Pitfalls &mdash; IS&amp;T 1551 Implementing Information Systems: User Perspective</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.7. Compound Boolean Expressions" href="compoundconditions.html" />
    <link rel="prev" title="5.5. Multiple Tests and if-else Statements" href="ifelsechained.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Intro to CS in C#
          </a>
              <div class="version">
                28 Jul 2024
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01.context/context.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.data/data.html">2. Data and Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03.functions/functions.html">3. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.basicstringops/basicstringops.html">4. Strings</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="decisions.html">5. Decisions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="conditions.html">5.1. Conditions I</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifstatements.html">5.2. Simple <code class="docutils literal notranslate"><span class="pre">if</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifelse.html">5.3. <code class="docutils literal notranslate"><span class="pre">if</span></code>-<code class="docutils literal notranslate"><span class="pre">else</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparisonops.html">5.4. More Conditional Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifelsechained.html">5.5. Multiple Tests and <code class="docutils literal notranslate"><span class="pre">if</span></code>-<code class="docutils literal notranslate"><span class="pre">else</span></code> Statements</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.6. If-statement Pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="compoundconditions.html">5.7. Compound Boolean Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifnested.html">5.8. Nested <code class="docutils literal notranslate"><span class="pre">if</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewdecisions.html">5.9. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../06.while/while.html">6. While Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07.foreach/foreach.html">7. foreach Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08.for/for.html">8. for Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09.files/files.html">9. Files &amp; Paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10.arrays/arrays.html">10. Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11.lists/lists.html">11. Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12.dictionaries/dictionaries.html">12. Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13.classes/classes.html">13. OOP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14.testing/testing.html">14. Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15.interfaces/interfaces.html">15. Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../16.recursion/recursion.html">16. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../17.datastructures/datastructures.html">17. Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../18.appendix/appendix.html">18. Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Intro to CS in C#</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="decisions.html"><span class="section-number">5. </span>Decisions</a></li>
      <li class="breadcrumb-item active"><span class="section-number">5.6. </span>If-statement Pitfalls</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/05.decisions/ifpitfalls.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="if-statement-pitfalls">
<h1><span class="section-number">5.6. </span>If-statement Pitfalls<a class="headerlink" href="#if-statement-pitfalls" title="Permalink to this heading"></a></h1>
<section id="dangerous-semicolon">
<span id="index-0"></span><span id="id1"></span><h2><span class="section-number">5.6.1. </span>Dangerous Semicolon<a class="headerlink" href="#dangerous-semicolon" title="Permalink to this heading"></a></h2>
<p>Regular statements must end with a semicolon.
It turns out that the semicolon is all you need to have a legal statement:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="p">;</span>
</pre></div>
</div>
<p>We will see places that it is useful, but
meanwhile it can cause errors: You may be hard pressed to
remember to put semicolons at the end of all your statements, and in response you may
get compulsive about adding them at the end of statement
lines.  Be careful NOT to put one at the end of a method heading or
an <code class="docutils literal notranslate"><span class="pre">if</span></code> condition:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// WRONG PROBABLY!</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</pre></div>
</div>
<p>This code is deadly, since it compiles and is almost surely
<em>not</em> what you mean.</p>
<p>Remember indentation and newlines are only significant for humans. The
two lines above are equivalent to:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">   </span><span class="p">;</span><span class="w">  </span><span class="c1">// Do nothing as statement when the condition is true</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="c1">// past if statement - do it always</span>
</pre></div>
</div>
<p>(Whenever you do need an empty statement, you are encouraged to put the
semicolon all by itself on a line, as above.)</p>
<p>If you always put an open brace <em>directly</em> after the condition in an <code class="docutils literal notranslate"><span class="pre">if</span></code> statement,
you will not make this error:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then even if you were to add a semicolon:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">;</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>it would be a waste of a keystroke, but it would just be the first (empty) statement
inside the block, and the writing would still follow:
The extra semicolon would have no effect.</p>
<p>The corresponding error at the end of a method heading will at least
generate a compiler error, though it may appear cryptic:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">badSemicolon</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
</pre></div>
</div>
<p>This is another easy one to make and <em>miss</em> - just one innocent semicolon.</p>
</section>
<section id="match-wrong-if-with-else">
<span id="match-wrong-if"></span><span id="index-1"></span><h2><span class="section-number">5.6.2. </span>Match Wrong <code class="docutils literal notranslate"><span class="pre">if</span></code> With <code class="docutils literal notranslate"><span class="pre">else</span></code><a class="headerlink" href="#match-wrong-if-with-else" title="Permalink to this heading"></a></h2>
<p>If you do not consistently put the substatements for the true
and false choices inside braces, you can run into problems from
the fact that the else part of an if statement is <em>optional</em>.
Even if you use braces consistently,
you may well need to read code that does not place
braces around single statements. If C# understood indentation as
in the recommended formatting style (or as required in Python),
the following would be OK:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">      </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;positive x and y&quot;</span><span class="p">);</span>
<span class="k">else</span>
<span class="w">   </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;x not positive, untested y&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Unfortunately placing the <code class="docutils literal notranslate"><span class="pre">else</span></code> under the first <code class="docutils literal notranslate"><span class="pre">if</span></code> is not enough to make
them go together (remember the C# compiler ignores extra whitespace). The
following is equivalent to the compiler, with the else apparently going
with the second if:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">      </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;positive x and y&quot;</span><span class="p">);</span>
<span class="w">   </span><span class="k">else</span>
<span class="w">      </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;x not positive, untested y&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The compiler is consistent with the latter visual pattern: an <code class="docutils literal notranslate"><span class="pre">else</span></code> goes
with the most <em>recent</em> <code class="docutils literal notranslate"><span class="pre">if</span></code> that could still take an <code class="docutils literal notranslate"><span class="pre">else</span></code>.
Hence if <code class="docutils literal notranslate"><span class="pre">x</span></code> is 3
and <code class="docutils literal notranslate"><span class="pre">y</span></code> is -2, the <code class="docutils literal notranslate"><span class="pre">else</span></code> part is executed and the statement printed is
incorrect: in this code
the else clause is only executed when <code class="docutils literal notranslate"><span class="pre">x</span></code> is positive and
<code class="docutils literal notranslate"><span class="pre">y</span></code> (<em>is</em>
tested and) is not positive.</p>
<p>If you put braces everywhere to reinforce
your indentation, as we suggest, or if you only add the following
one set of braces around the inner if statement:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">      </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;positive x and y&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="w">   </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;x not positive, untested y&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>then the braces enclosing the inner <code class="docutils literal notranslate"><span class="pre">if</span></code> statement make it impossible for
the inner  <code class="docutils literal notranslate"><span class="pre">if</span></code> to continue on to an optional <code class="docutils literal notranslate"><span class="pre">else</span></code> part.
The <code class="docutils literal notranslate"><span class="pre">else</span></code> must go
with the first <code class="docutils literal notranslate"><span class="pre">if</span></code>. Now when the <code class="docutils literal notranslate"><span class="pre">else</span></code> part is reached, the statement
printed will be true: <code class="docutils literal notranslate"><span class="pre">x</span></code> is not positive, and the test of <code class="docutils literal notranslate"><span class="pre">y</span></code> was skipped.</p>
</section>
<section id="missing-braces">
<span id="index-2"></span><span id="id2"></span><h2><span class="section-number">5.6.3. </span>Missing Braces<a class="headerlink" href="#missing-braces" title="Permalink to this heading"></a></h2>
<p>Another place you can fool yourself with nice indenting style is
something like this.  Suppose we start with a perfectly reasonable</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;x is: positive&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>We may decide to avoid the braces, since there <em>is</em> just one statement
that we want as the if-true part, but if we later decide
that we want this on two lines
and change it to</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;x is:&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;  positive&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>We are not going to get the behavior we want.
The word “positive” will <em>always</em> be printed.</p>
<p>If we had first taken a bit more effort originally to write</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;x is: positive&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>then we could have split successfully into</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;x is:&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;  positive&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This way we do not have to keep worrying about this question when we revise:
“Have I switched to multiple lines after the <code class="docutils literal notranslate"><span class="pre">if</span></code>
and need to introduce braces?”</p>
<p>The last two of the pitfalls mentioned in this section are fixed by consistent
use of braces in the sub-statements of <code class="docutils literal notranslate"><span class="pre">if</span></code> statements.  They fix the <code class="docutils literal notranslate"><span class="pre">;</span></code>
after if-condition problem only if the open brace comes right after
the condition, but you still get a nasty error if you put in a semicolon
between the condition and opening brace.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ifelsechained.html" class="btn btn-neutral float-left" title="5.5. Multiple Tests and if-else Statements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="compoundconditions.html" class="btn btn-neutral float-right" title="5.7. Compound Boolean Expressions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .
      <span class="lastupdated">Last updated on 28-July-2024 14:37:09.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>