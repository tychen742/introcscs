<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>9.8. FIO Helper Class &mdash; Introduction to Computer Science in C# 19 Jul 2024 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="9.9. Chapter Review Questions" href="reviewfiles.html" />
    <link rel="prev" title="9.7. Command Line Execution" href="cmdline-execution.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #922247" >

          
          
          <a href="../index.html" class="icon icon-home">
            Introduction to Computer Science in C#
          </a>
              <div class="version">
                19 Jul 2024
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1.context/context.html">1. Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.data/data.html">2. Data and Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3.functions/functions.html">3. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4.basicstringops/basicstringops.html">4. Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5.decisions/decisions.html">5. Decisions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6.while/while.html">6. While Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7.foreach/foreach.html">7. foreach Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8.for/for.html">8. for Loops</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="files.html">9. Files, Paths, and Directories</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fileabstraction.html">9.1. Files As Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="filewrite.html">9.2. Writing Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="fileread.html">9.3. Reading Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="paths.html">9.4. Path Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="dir-file.html">9.5. Directory Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="dir-file.html#file-class">9.6. File Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmdline-execution.html">9.7. Command Line Execution</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">9.8. FIO Helper Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewfiles.html">9.9. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../10.arrays/arrays.html">10. Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11.lists/lists.html">11. Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12.dictionaries/dictionaries.html">12. Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13.classes/classes.html">13. Object-Oriented Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14.testing/testing.html">14. Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15.interfaces/interfaces.html">15. Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../16.recursion/recursion.html">16. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../17.datastructures/datastructures.html">17. Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../18.appendix/appendix.html">18. Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #922247" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Introduction to Computer Science in C#</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="files.html"><span class="section-number">9. </span>Files, Paths, and Directories</a></li>
      <li class="breadcrumb-item active"><span class="section-number">9.8. </span>FIO Helper Class</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/9.files/fio.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fio-helper-class">
<span id="fio"></span><span id="index-0"></span><h1><span class="section-number">9.8. </span>FIO Helper Class<a class="headerlink" href="#fio-helper-class" title="Permalink to this heading"></a></h1>
<p>This is an <strong>optional</strong> section.  It was much more important before we realized how
easily we much
simplified file manipulating projects by changing the Output Path setting.</p>
<p>Still there are a variety of situations where a program may want to access
resources in the file system, without know ahead of time exactly which folder contains
the file resource.  The <code class="docutils literal notranslate"><span class="pre">FIO</span></code> library class that we display here illustrates how
a program can search for the directory in which a file resides, given a list
of folder options.  This section also illustrates use of methods from the <code class="docutils literal notranslate"><span class="pre">Path</span></code> and
<code class="docutils literal notranslate"><span class="pre">File</span></code> classes.</p>
<p>In this case we are specifically thinking of two possible uses of
program source files:  When executing, the project folder may
be the current directory or, in the default setup for Xamarain, the current directory
may be two folders down in <code class="file docutils literal notranslate"><span class="pre">bin/Debug</span></code>.</p>
<p>We use one idea that is discussed more in the next chapter:  We need a sequence
of directory strings to look through.  At this point we have only discussed
sequences of individual characters.   The variable <code class="docutils literal notranslate"><span class="pre">paths</span></code>
contains a sequence of directory paths to check.
(More on the syntax comes up shortly in <a class="reference internal" href="../10.arrays/arrays.html#array"><span class="std std-ref">Arrays</span></a>.)
In our case we make the
sequence contain
<code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code>, the current directory, <code class="docutils literal notranslate"><span class="pre">&quot;..&quot;</span></code>, the parent directory, and
<code class="docutils literal notranslate"><span class="pre">Path.Combine(&quot;..&quot;,</span> <span class="pre">&quot;..&quot;)</span></code>, the parent’s parent.
We make <code class="docutils literal notranslate"><span class="pre">paths</span></code> a static variable, so
it is visible in all the functions in the class.</p>
<p>Then the sequence <code class="docutils literal notranslate"><span class="pre">paths</span></code>
can be used in the <code class="docutils literal notranslate"><span class="pre">foreach</span></code> loop:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Find a directory containing the filename</span>
<span class="c1">/// and return the full file path, if it exists.</span>
<span class="c1">/// Otherwise return null.</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetPath</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">dir</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">paths</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">string</span><span class="w"> </span><span class="n">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="n">Combine</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">File</span><span class="p">.</span><span class="n">Exists</span><span class="p">(</span><span class="n">filePath</span><span class="p">))</span>
<span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="n">filePath</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For each directory path in <code class="docutils literal notranslate"><span class="pre">paths</span></code>, we create a <code class="docutils literal notranslate"><span class="pre">filePath</span></code> as if the
file were in that directory.  We return the first path that actually exists.
We allow for the file to not be in any of the directories in <code class="docutils literal notranslate"><span class="pre">paths</span></code>.  If
we do not find it, we return <code class="docutils literal notranslate"><span class="pre">null</span></code> (no object).</p>
<p>For convenience, we have an elaboration, using <code class="docutils literal notranslate"><span class="pre">GetPath</span></code>,
that directly opens the file to read:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Find a directory containing filename;</span>
<span class="c1">/// return a new StreamReader to the file</span>
<span class="c1">/// or null if the file does not exist.</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">StreamReader</span><span class="w"> </span><span class="nf">OpenReader</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="kt">string</span><span class="w"> </span><span class="n">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetPath</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filePath</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">   </span><span class="k">else</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">StreamReader</span><span class="p">(</span><span class="w"> </span><span class="n">filePath</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We have a variation on <code class="docutils literal notranslate"><span class="pre">GetPath</span></code> that just return the path to the
directory containing the file.  Here is the heading:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Return a directory conaining the filename, if it exists.</span>
<span class="c1">/// Otherwise return null.</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetLocation</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<p>This is useful in case you want to later write into the same directory
that you read from.  You can get a location from <code class="docutils literal notranslate"><span class="pre">GetLocation</span></code> and then
write to the same directory, creating a <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code>.
You can use the convenience function:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Join the location directory and filename;</span>
<span class="c1">/// open and return a StreamWriter to the file.</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">StreamWriter</span><span class="w"> </span><span class="nf">OpenWriter</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="kt">string</span><span class="w"> </span><span class="n">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="n">Combine</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">StreamWriter</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The entire <code class="docutils literal notranslate"><span class="pre">FIO</span></code> class is in
<a class="reference external" href="https://github.com/tychen742/introcs-csharp-examples/blob/master/fio/fio.cs">fio/fio.cs</a></p>
<p>We illustrate the use of <code class="docutils literal notranslate"><span class="pre">FIO</span></code> functions in example file
<a class="reference external" href="https://github.com/tychen742/introcs-csharp-examples/blob/master/fio_usage/fio_usage.cs">fio_usage/fio_usage.cs</a>:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.IO</span><span class="p">;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">IntroCS</span>
<span class="p">{</span>
<span class="w">   </span><span class="k">class</span><span class="w"> </span><span class="nc">FIOTest</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="kt">string</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;sample.txt&quot;</span><span class="p">;</span>
<span class="w">         </span><span class="kt">string</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;output.txt&quot;</span><span class="p">;</span>
<span class="w">         </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Directory of {0}: {1}&quot;</span><span class="p">,</span>
<span class="w">                           </span><span class="n">sample</span><span class="p">,</span><span class="w"> </span><span class="n">FIO</span><span class="p">.</span><span class="n">GetLocation</span><span class="p">(</span><span class="n">sample</span><span class="p">));</span>
<span class="w">         </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Path to  {0}: {1}&quot;</span><span class="p">,</span>
<span class="w">                           </span><span class="n">sample</span><span class="p">,</span><span class="w"> </span><span class="n">FIO</span><span class="p">.</span><span class="n">GetPath</span><span class="p">(</span><span class="n">sample</span><span class="p">));</span>
<span class="w">         </span><span class="n">StreamReader</span><span class="w"> </span><span class="n">reader1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FIO</span><span class="p">.</span><span class="n">OpenReader</span><span class="p">(</span><span class="n">sample</span><span class="p">);</span>
<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">reader1</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">reader1</span><span class="p">.</span><span class="n">ReadToEnd</span><span class="p">());</span>
<span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;First reader test passed.&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">reader1</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
<span class="w">         </span><span class="p">}</span>

<span class="w">         </span><span class="n">StreamReader</span><span class="w"> </span><span class="n">reader2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FIO</span><span class="p">.</span><span class="n">OpenReader</span><span class="p">(</span><span class="n">FIO</span><span class="p">.</span><span class="n">GetLocation</span><span class="p">(</span><span class="n">sample</span><span class="p">),</span>
<span class="w">                                               </span><span class="n">sample</span><span class="p">);</span>
<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">reader2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Second reader test passed.&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">reader2</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
<span class="w">         </span><span class="p">}</span>

<span class="w">         </span><span class="n">StreamWriter</span><span class="w"> </span><span class="n">writer1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FIO</span><span class="p">.</span><span class="n">OpenWriter</span><span class="p">(</span><span class="n">FIO</span><span class="p">.</span><span class="n">GetLocation</span><span class="p">(</span><span class="n">sample</span><span class="p">),</span>
<span class="w">                                               </span><span class="n">output</span><span class="p">);</span>
<span class="w">         </span><span class="n">writer1</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;File in the same directory as {0}.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sample</span><span class="p">);</span>
<span class="w">         </span><span class="n">writer1</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
<span class="w">         </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Writer test passed; file written at \n {0}&quot;</span><span class="p">,</span>
<span class="w">                           </span><span class="n">FIO</span><span class="p">.</span><span class="n">GetPath</span><span class="p">(</span><span class="n">output</span><span class="p">));</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you look at the fio_usage project in our examples solution, you see that
<code class="docutils literal notranslate"><span class="pre">sample.txt</span></code> is a file in the project folder.  The program
ends up writing to a new file in the same (project) directory.  Remember that even
though the new file <code class="file docutils literal notranslate"><span class="pre">output.txt</span></code>
appears in the project directory, it does not appear in the
Solution pad unless you add it to the project.  You can see it in the file system,
and open it if you like.</p>
<p>This project was created with the default set up:  Output path
two folders down.  If you change to Output path to the main project folder,
it should still work.  If you open a terminal/console and go to the project directory, you can compile
and run this program, and it will also work.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cmdline-execution.html" class="btn btn-neutral float-left" title="9.7. Command Line Execution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reviewfiles.html" class="btn btn-neutral float-right" title="9.9. Chapter Review Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .
      <span class="lastupdated">Last updated on 19-July-2024 03:39:27.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>